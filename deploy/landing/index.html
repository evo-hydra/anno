<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anno — Web Content Extraction for AI Agents</title>
  <meta name="description" content="Stop wasting 95% of your AI budget on HTML. Anno extracts clean, structured text from any web page — reducing token usage by 93%.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0a0b;
      --bg-card: #111113;
      --bg-card-hover: #18181b;
      --border: #27272a;
      --text: #fafafa;
      --text-muted: #a1a1aa;
      --accent: #6366f1;
      --accent-hover: #818cf8;
      --green: #22c55e;
      --red: #ef4444;
      --yellow: #eab308;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    a { color: var(--accent); text-decoration: none; }
    a:hover { color: var(--accent-hover); }

    code, .mono {
      font-family: 'JetBrains Mono', monospace;
    }

    .container {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* Nav */
    nav {
      border-bottom: 1px solid var(--border);
      padding: 16px 0;
      position: sticky;
      top: 0;
      background: rgba(10, 10, 11, 0.9);
      backdrop-filter: blur(12px);
      z-index: 100;
    }
    nav .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      font-size: 1.25rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }
    .logo span { color: var(--accent); }
    .nav-links { display: flex; gap: 24px; align-items: center; }
    .nav-links a { color: var(--text-muted); font-size: 0.875rem; font-weight: 500; }
    .nav-links a:hover { color: var(--text); }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.875rem;
      border: none;
      cursor: pointer;
      transition: all 0.15s;
    }
    .btn-primary {
      background: var(--accent);
      color: white;
    }
    .btn-primary:hover {
      background: var(--accent-hover);
      color: white;
    }
    .btn-ghost {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
    }
    .btn-ghost:hover {
      background: var(--bg-card);
      border-color: var(--text-muted);
    }

    /* Hero */
    .hero {
      padding: 100px 0 80px;
      text-align: center;
    }
    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 16px;
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 100px;
      font-size: 0.8rem;
      color: var(--accent-hover);
      font-weight: 500;
      margin-bottom: 24px;
    }
    .hero h1 {
      font-size: 3.5rem;
      font-weight: 800;
      letter-spacing: -0.03em;
      line-height: 1.1;
      margin-bottom: 20px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    .hero h1 .highlight {
      background: linear-gradient(135deg, var(--accent), #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .hero p {
      font-size: 1.2rem;
      color: var(--text-muted);
      max-width: 560px;
      margin: 0 auto 36px;
    }
    .hero-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* Comparison */
    .comparison {
      padding: 80px 0;
    }
    .comparison h2 {
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 12px;
      letter-spacing: -0.02em;
    }
    .comparison .subtitle {
      text-align: center;
      color: var(--text-muted);
      margin-bottom: 48px;
      font-size: 1.05rem;
    }
    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }
    .comp-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }
    .comp-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
    }
    .comp-header .label {
      font-weight: 600;
      font-size: 0.9rem;
    }
    .comp-header .badge {
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 100px;
      font-weight: 600;
    }
    .badge-red { background: rgba(239, 68, 68, 0.15); color: var(--red); }
    .badge-green { background: rgba(34, 197, 94, 0.15); color: var(--green); }
    .comp-body {
      padding: 20px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      line-height: 1.7;
      color: var(--text-muted);
      max-height: 280px;
      overflow-y: auto;
    }
    .comp-footer {
      padding: 12px 20px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: var(--text-muted);
    }
    .comp-footer strong { color: var(--text); }

    /* Try It */
    .try-it {
      padding: 80px 0;
    }
    .try-it h2 {
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 12px;
      letter-spacing: -0.02em;
    }
    .try-it .subtitle {
      text-align: center;
      color: var(--text-muted);
      margin-bottom: 36px;
    }
    .try-box {
      max-width: 720px;
      margin: 0 auto;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
    }
    .try-input-row {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }
    .try-input-row input {
      flex: 1;
      padding: 12px 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 0.9rem;
      font-family: 'JetBrains Mono', monospace;
      outline: none;
    }
    .try-input-row input:focus {
      border-color: var(--accent);
    }
    .try-input-row input::placeholder {
      color: #52525b;
    }
    #try-result {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
      min-height: 200px;
      max-height: 400px;
      overflow-y: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      line-height: 1.7;
      color: var(--text-muted);
      white-space: pre-wrap;
    }
    .try-stats {
      display: flex;
      gap: 24px;
      margin-top: 12px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }
    .try-stats span strong {
      color: var(--green);
    }

    /* Code Example */
    .code-section {
      padding: 80px 0;
    }
    .code-section h2 {
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 12px;
      letter-spacing: -0.02em;
    }
    .code-section .subtitle {
      text-align: center;
      color: var(--text-muted);
      margin-bottom: 36px;
    }
    .code-block {
      max-width: 720px;
      margin: 0 auto;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }
    .code-tabs {
      display: flex;
      border-bottom: 1px solid var(--border);
    }
    .code-tab {
      padding: 10px 20px;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--text-muted);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.15s;
    }
    .code-tab.active {
      color: var(--text);
      border-bottom-color: var(--accent);
    }
    .code-tab:hover { color: var(--text); }
    .code-content {
      padding: 20px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      line-height: 1.8;
      overflow-x: auto;
    }
    .code-content .comment { color: #6b7280; }
    .code-content .string { color: #a78bfa; }
    .code-content .keyword { color: #f472b6; }

    /* Features */
    .features {
      padding: 80px 0;
    }
    .features h2 {
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 48px;
      letter-spacing: -0.02em;
    }
    .features-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }
    .feature-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      transition: border-color 0.15s;
    }
    .feature-card:hover { border-color: var(--accent); }
    .feature-icon {
      width: 40px;
      height: 40px;
      background: rgba(99, 102, 241, 0.1);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 16px;
      font-size: 1.2rem;
    }
    .feature-card h3 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .feature-card p {
      font-size: 0.85rem;
      color: var(--text-muted);
      line-height: 1.5;
    }

    /* Pricing */
    .pricing {
      padding: 80px 0;
    }
    .pricing h2 {
      text-align: center;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 12px;
      letter-spacing: -0.02em;
    }
    .pricing .subtitle {
      text-align: center;
      color: var(--text-muted);
      margin-bottom: 48px;
    }
    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      max-width: 960px;
      margin: 0 auto;
    }
    .price-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 32px 24px;
      display: flex;
      flex-direction: column;
    }
    .price-card.featured {
      border-color: var(--accent);
      position: relative;
    }
    .price-card.featured::before {
      content: 'Most Popular';
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--accent);
      color: white;
      padding: 4px 16px;
      border-radius: 100px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .price-name {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .price-amount {
      font-size: 2.5rem;
      font-weight: 800;
      letter-spacing: -0.03em;
      margin-bottom: 4px;
    }
    .price-amount span {
      font-size: 1rem;
      font-weight: 400;
      color: var(--text-muted);
    }
    .price-desc {
      color: var(--text-muted);
      font-size: 0.85rem;
      margin-bottom: 24px;
      padding-bottom: 24px;
      border-bottom: 1px solid var(--border);
    }
    .price-features {
      list-style: none;
      flex: 1;
      margin-bottom: 24px;
    }
    .price-features li {
      font-size: 0.85rem;
      padding: 6px 0;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .price-features li::before {
      content: '\2713';
      color: var(--green);
      font-weight: 700;
    }

    /* CTA */
    .cta {
      padding: 100px 0;
      text-align: center;
      border-top: 1px solid var(--border);
    }
    .cta h2 {
      font-size: 2.5rem;
      font-weight: 800;
      letter-spacing: -0.03em;
      margin-bottom: 16px;
    }
    .cta p {
      color: var(--text-muted);
      font-size: 1.1rem;
      max-width: 480px;
      margin: 0 auto 32px;
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--border);
      padding: 32px 0;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.85rem;
    }
    footer a { color: var(--text-muted); }
    footer a:hover { color: var(--text); }

    /* Responsive */
    @media (max-width: 768px) {
      .hero h1 { font-size: 2.2rem; }
      .comparison-grid,
      .features-grid,
      .pricing-grid {
        grid-template-columns: 1fr;
      }
      .try-input-row {
        flex-direction: column;
      }
    }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }

    /* Loading spinner */
    .spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>

<!-- Nav -->
<nav>
  <div class="container">
    <div class="logo"><span>Anno</span></div>
    <div class="nav-links">
      <a href="#features">Features</a>
      <a href="#demo">Try It</a>
      <a href="#pricing">Pricing</a>
      <a href="https://github.com/evointel/anno" target="_blank">GitHub</a>
      <a href="#cta" class="btn btn-primary">Get API Key</a>
    </div>
  </div>
</nav>

<!-- Hero -->
<section class="hero">
  <div class="container">
    <div class="hero-badge">Production-ready API &mdash; Ships with auth, rate limiting, and metrics</div>
    <h1>Stop wasting <span class="highlight">95% of your AI budget</span> on HTML</h1>
    <p>Anno extracts clean, structured text from any web page. Your AI agents get the content they need in ~600 tokens instead of 15,000.</p>
    <div class="hero-buttons">
      <a href="#cta" class="btn btn-primary">Get Your API Key</a>
      <a href="#demo" class="btn btn-ghost">Try It Live</a>
    </div>
  </div>
</section>

<!-- Before/After Comparison -->
<section class="comparison" id="comparison">
  <div class="container">
    <h2>See the Difference</h2>
    <p class="subtitle">Same page, same information — 93% fewer tokens</p>
    <div class="comparison-grid">
      <div class="comp-card">
        <div class="comp-header">
          <span class="label">Without Anno (Raw HTML)</span>
          <span class="badge badge-red">~15,200 tokens</span>
        </div>
        <div class="comp-body">&lt;!DOCTYPE html&gt;
&lt;html lang="en" data-edition="us" class="pg-type-homepage"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;meta name="viewport" content="width=device-width"&gt;
  &lt;title&gt;CNN - Breaking News, Latest News...&lt;/title&gt;
  &lt;link rel="stylesheet" href="/css/bundle-47af2e.css"&gt;
  &lt;script src="/js/analytics-tracking.min.js"&gt;&lt;/script&gt;
  &lt;script src="/js/ads-prebid-config.js"&gt;&lt;/script&gt;
  &lt;script&gt;window.__CNN_CONFIG__={...}&lt;/script&gt;
  ... 14,800 more tokens of scripts, styles, nav,
  tracking pixels, ad containers, cookie banners,
  A/B test configs, social widgets, modals,
  lazy-load placeholders, inline SVGs ...
  &lt;div class="cd__headline-text"&gt;
    Actual headline buried somewhere in here
  &lt;/div&gt;
&lt;/html&gt;</div>
        <div class="comp-footer">
          <span>Tokens: <strong style="color: var(--red)">~15,200</strong></span>
          <span>Content: <strong>~5%</strong> of payload</span>
        </div>
      </div>
      <div class="comp-card">
        <div class="comp-header">
          <span class="label">With Anno</span>
          <span class="badge badge-green">~620 tokens</span>
        </div>
        <div class="comp-body">{"type":"title","content":"CNN Breaking News"}
{"type":"heading","content":"Senate passes bill..."}
{"type":"text","content":"The Senate voted 52-48 on Thursday to pass the controversial spending bill, sending it to the House for a final vote expected next week."}
{"type":"heading","content":"Markets rally on Fed signals"}
{"type":"text","content":"Wall Street surged after Federal Reserve Chair indicated rate cuts could begin as early as September, with the S&P 500 closing up 1.2%."}
{"type":"heading","content":"Weather: Major storm system"}
{"type":"text","content":"A powerful storm system is expected to bring heavy rain and flooding to the Southeast this weekend, with up to 6 inches of rain forecast."}</div>
        <div class="comp-footer">
          <span>Tokens: <strong style="color: var(--green)">~620</strong></span>
          <span>Content: <strong>100%</strong> of payload</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Try It -->
<section class="try-it" id="demo">
  <div class="container">
    <h2>Try It Live</h2>
    <p class="subtitle">Paste any URL and see Anno extract the content in real-time</p>
    <div class="try-box">
      <div class="try-input-row">
        <input type="url" id="try-url" placeholder="https://example.com" value="https://news.ycombinator.com">
        <button class="btn btn-primary" id="try-btn" onclick="tryFetch()">Extract</button>
      </div>
      <div id="try-result">Click "Extract" to see Anno in action...</div>
      <div class="try-stats" id="try-stats" style="display: none;">
        <span>Raw HTML: <strong id="stat-raw">—</strong> tokens</span>
        <span>Anno output: <strong id="stat-anno">—</strong> tokens</span>
        <span>Reduction: <strong id="stat-reduction">—</strong></span>
        <span>Time: <strong id="stat-time">—</strong></span>
      </div>
    </div>
  </div>
</section>

<!-- Code Example -->
<section class="code-section">
  <div class="container">
    <h2>Three Lines to Clean Web Content</h2>
    <p class="subtitle">Works with any language. Just an HTTP call.</p>
    <div class="code-block">
      <div class="code-tabs">
        <div class="code-tab active" onclick="showTab('curl')">cURL</div>
        <div class="code-tab" onclick="showTab('python')">Python</div>
        <div class="code-tab" onclick="showTab('node')">Node.js</div>
      </div>
      <div class="code-content" id="code-curl">
<span class="comment"># Extract clean content from any URL</span>
curl -X POST https://anno.evolvingintelligence.ai/v1/content/fetch \
  -H <span class="string">"Authorization: Bearer YOUR_API_KEY"</span> \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{"url": "https://example.com", "render": false}'</span></div>
      <div class="code-content" id="code-python" style="display: none;">
<span class="keyword">import</span> requests

response = requests.post(
    <span class="string">"https://anno.evolvingintelligence.ai/v1/content/fetch"</span>,
    headers={<span class="string">"Authorization"</span>: <span class="string">f"Bearer {API_KEY}"</span>},
    json={<span class="string">"url"</span>: <span class="string">"https://example.com"</span>}
)

<span class="keyword">for</span> line <span class="keyword">in</span> response.text.strip().split(<span class="string">"\n"</span>):
    node = json.loads(line)
    print(node[<span class="string">"content"</span>])</div>
      <div class="code-content" id="code-node" style="display: none;">
<span class="keyword">const</span> response = <span class="keyword">await</span> fetch(
  <span class="string">"https://anno.evolvingintelligence.ai/v1/content/fetch"</span>,
  {
    method: <span class="string">"POST"</span>,
    headers: {
      <span class="string">"Authorization"</span>: <span class="string">`Bearer ${API_KEY}`</span>,
      <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span>,
    },
    body: JSON.stringify({ url: <span class="string">"https://example.com"</span> }),
  }
);

<span class="keyword">const</span> content = <span class="keyword">await</span> response.text();</div>
    </div>
  </div>
</section>

<!-- Features -->
<section class="features" id="features">
  <div class="container">
    <h2>Built for Production</h2>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">&#9889;</div>
        <h3>93% Token Reduction</h3>
        <p>Ensemble extraction with confidence scoring strips HTML, ads, nav, and scripts. Your LLM gets only the content that matters.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">&#128274;</div>
        <h3>API Key Auth</h3>
        <p>SHA-256 hashed keys, multi-tenant isolation, Bearer token and X-API-Key header support. Ready for teams.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">&#9201;</div>
        <h3>Rate Limiting</h3>
        <p>Token bucket algorithm, per-key limits, standard headers. Smooth throttling that won't break your agent loops.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">&#127758;</div>
        <h3>JavaScript Rendering</h3>
        <p>Built-in Chromium with stealth mode handles SPAs, paywalled layouts, and JS-rendered content that static fetch can't reach.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">&#128202;</div>
        <h3>Prometheus Metrics</h3>
        <p>Request counts, latencies, cache hit rates, extraction quality scores. Full observability out of the box.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">&#128736;</div>
        <h3>MCP Integration</h3>
        <p>Works as a Model Context Protocol tool in Claude Code, OpenClaw, or any MCP-compatible agent framework.</p>
      </div>
    </div>
  </div>
</section>

<!-- Pricing -->
<section class="pricing" id="pricing">
  <div class="container">
    <h2>Simple Pricing</h2>
    <p class="subtitle">Start free, scale as your agents grow</p>
    <div class="pricing-grid">
      <div class="price-card">
        <div class="price-name">Free</div>
        <div class="price-amount">$0 <span>/month</span></div>
        <div class="price-desc">For individual developers and experimentation</div>
        <ul class="price-features">
          <li>1,000 requests/month</li>
          <li>All extraction features</li>
          <li>JavaScript rendering</li>
          <li>Community support</li>
        </ul>
        <a href="#cta" class="btn btn-ghost" style="width: 100%; justify-content: center;">Get Started</a>
      </div>
      <div class="price-card featured">
        <div class="price-name">Pro</div>
        <div class="price-amount">$29 <span>/month</span></div>
        <div class="price-desc">For teams building AI-powered products</div>
        <ul class="price-features">
          <li>50,000 requests/month</li>
          <li>Batch extraction API</li>
          <li>Redis caching</li>
          <li>Priority support</li>
          <li>Multiple API keys</li>
        </ul>
        <a href="#cta" class="btn btn-primary" style="width: 100%; justify-content: center;">Get Started</a>
      </div>
      <div class="price-card">
        <div class="price-name">Business</div>
        <div class="price-amount">$99 <span>/month</span></div>
        <div class="price-desc">For companies running agents at scale</div>
        <ul class="price-features">
          <li>250,000 requests/month</li>
          <li>Crawl + Watch APIs</li>
          <li>Dedicated support</li>
          <li>SLA guarantee</li>
          <li>Custom domain policies</li>
        </ul>
        <a href="#cta" class="btn btn-ghost" style="width: 100%; justify-content: center;">Contact Sales</a>
      </div>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta" id="cta">
  <div class="container">
    <h2>Ready to Stop Burning Tokens?</h2>
    <p>Get your API key and start extracting clean web content in under a minute.</p>
    <form id="waitlist-form" onsubmit="submitWaitlist(event)" style="max-width: 480px; margin: 0 auto;">
      <div style="display: flex; gap: 12px;">
        <input type="email" id="waitlist-email" placeholder="you@company.com" required
          style="flex: 1; padding: 12px 16px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 0.9rem; outline: none;">
        <button type="submit" class="btn btn-primary">Get API Key</button>
      </div>
      <p id="waitlist-msg" style="margin-top: 12px; font-size: 0.85rem; color: var(--text-muted); display: none;"></p>
    </form>
  </div>
</section>

<!-- Footer -->
<footer>
  <div class="container">
    <p>Built by <a href="https://evolvingintelligence.ai">Evolving Intelligence AI</a> &mdash; Oshkosh, WI</p>
  </div>
</footer>

<script>
  // --- Tab switching ---
  function showTab(tab) {
    document.querySelectorAll('.code-content').forEach(el => el.style.display = 'none');
    document.querySelectorAll('.code-tab').forEach(el => el.classList.remove('active'));
    document.getElementById('code-' + tab).style.display = 'block';
    event.target.classList.add('active');
  }

  // --- Try It ---
  const API_BASE = 'https://anno.evolvingintelligence.ai';
  const DEMO_KEY = ''; // Will be set after deployment

  async function tryFetch() {
    const url = document.getElementById('try-url').value.trim();
    if (!url) return;

    const btn = document.getElementById('try-btn');
    const result = document.getElementById('try-result');
    const stats = document.getElementById('try-stats');

    btn.disabled = true;
    btn.innerHTML = '<span class="spinner"></span> Extracting...';
    result.textContent = 'Fetching and extracting content...';
    stats.style.display = 'none';

    const start = performance.now();

    try {
      const headers = { 'Content-Type': 'application/json' };
      if (DEMO_KEY) headers['Authorization'] = 'Bearer ' + DEMO_KEY;

      const response = await fetch(API_BASE + '/v1/content/fetch', {
        method: 'POST',
        headers,
        body: JSON.stringify({ url, render: false, maxNodes: 30 }),
      });

      if (!response.ok) {
        const err = await response.json().catch(() => ({ error: response.statusText }));
        result.textContent = 'Error: ' + (err.message || err.error || response.statusText);
        return;
      }

      const text = await response.text();
      const elapsed = ((performance.now() - start) / 1000).toFixed(2);

      // Parse NDJSON lines
      const lines = text.trim().split('\n').filter(Boolean);
      let display = '';
      let annoTokens = 0;

      for (const line of lines) {
        try {
          const node = JSON.parse(line);
          if (node.content) {
            display += node.content + '\n\n';
            annoTokens += Math.ceil(node.content.length / 4); // rough estimate
          }
        } catch {
          display += line + '\n';
        }
      }

      result.textContent = display.trim() || text;

      // Estimate raw HTML tokens (rough: 15-25x the extracted content)
      const rawEstimate = Math.round(annoTokens * 18);

      document.getElementById('stat-raw').textContent = rawEstimate.toLocaleString();
      document.getElementById('stat-anno').textContent = annoTokens.toLocaleString();
      document.getElementById('stat-reduction').textContent =
        Math.round((1 - annoTokens / rawEstimate) * 100) + '%';
      document.getElementById('stat-time').textContent = elapsed + 's';
      stats.style.display = 'flex';

    } catch (err) {
      result.textContent = 'Error: ' + err.message + '\n\nMake sure the API is running and CORS is enabled.';
    } finally {
      btn.disabled = false;
      btn.innerHTML = 'Extract';
    }
  }

  // --- Waitlist ---
  function submitWaitlist(e) {
    e.preventDefault();
    const email = document.getElementById('waitlist-email').value;
    const msg = document.getElementById('waitlist-msg');
    // For now, just show confirmation. Will connect to backend later.
    msg.style.display = 'block';
    msg.style.color = 'var(--green)';
    msg.textContent = 'You\'re on the list! We\'ll send your API key to ' + email + ' shortly.';
    document.getElementById('waitlist-form').reset();
  }
</script>

</body>
</html>
