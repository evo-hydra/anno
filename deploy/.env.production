# Anno Production Configuration
# Generated for Hetzner deployment

# =============================================================================
# Server
# =============================================================================
PORT=5213
NODE_ENV=production

# =============================================================================
# Auth — REQUIRED in production
# =============================================================================
ANNO_AUTH_ENABLED=true
# Comma-separated API keys. Generate with: openssl rand -hex 32
# Example: ANNO_API_KEYS=key1,key2,key3
ANNO_API_KEYS=CHANGE_ME_GENERATE_WITH_openssl_rand_hex_32
ANNO_AUTH_BYPASS_DEV=false
ANNO_RATE_LIMIT_PER_KEY=60

# =============================================================================
# Monthly Quota Enforcement (per-tenant, Redis-backed)
# =============================================================================
ANNO_QUOTA_ENABLED=true
ANNO_QUOTA_FREE_MONTHLY=200
ANNO_QUOTA_PRO_MONTHLY=10000
ANNO_QUOTA_BIZ_MONTHLY=50000
ANNO_BURST_FREE_PER_MIN=5
ANNO_BURST_PRO_PER_MIN=60
ANNO_BURST_BIZ_PER_MIN=200

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# =============================================================================
# Redis
# =============================================================================
REDIS_ENABLED=true
REDIS_URL=redis://redis:6379
REDIS_TTL_MS=3600000

# =============================================================================
# Cache (in-memory LRU, on top of Redis)
# =============================================================================
CACHE_MAX_ENTRIES=256
CACHE_TTL_MS=300000

# =============================================================================
# Rendering (Playwright/Chromium)
# =============================================================================
RENDERING_ENABLED=true
RENDER_TIMEOUT_MS=30000
RENDER_WAIT_UNTIL=networkidle
RENDER_HEADLESS=true
RENDER_MAX_PAGES=3
RENDER_STEALTH=true

# =============================================================================
# Fetch
# =============================================================================
# Removed — uses browser-like Chrome UA from src/config/user-agents.ts by default
# USER_AGENT=Anno/1.0
FETCH_TIMEOUT_MS=15000
RESPECT_ROBOTS=true
OVERRIDE_ROBOTS=false

# =============================================================================
# SSRF Protection
# =============================================================================
SSRF_PROTECTION_ENABLED=true
SSRF_ALLOW_PRIVATE_IPS=false

# =============================================================================
# Metrics
# =============================================================================
METRICS_RESET_ENABLED=false
ENABLE_STAGE_METRICS=true

# =============================================================================
# AI / LLM (deterministic by default — no API keys needed)
# =============================================================================
AI_EMBEDDING_PROVIDER=deterministic
AI_LLM_PROVIDER=none
AI_VECTOR_STORE=memory
AI_SUMMARIZER=heuristic

# =============================================================================
# Policies
# =============================================================================
POLICY_ENABLED=true
POLICY_DIR=./policies
DEFAULT_POLICY=default.yaml
POLICY_VALIDATION_ENABLED=true

# =============================================================================
# CORS
# =============================================================================
ALLOWED_ORIGINS=https://evolvingintelligence.ai,https://www.evolvingintelligence.ai
